<html lang="en_US">

<head>
  <title>Feed and generalize : Make our agent proactive</title>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <link href="../style/ontologenius_api.css" rel="stylesheet" type="text/css">
  <link href="../images/favicon.ico" rel="shortcut icon">
  <link href="../images/favicon-32x32.png" rel="icon" type="image/png">
  <link href="../images/favicon-16x16.png" rel="icon" type="image/png">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
</head>

<body>
  <div class="header" id="header">
    <header class="fixed" id="navbar">
      <div class="container">
          <div class="navbar-header">
            <div id="header-buttons">
                <ul id="header-ul" data-event="hover_intent" data-effect="fade" data-effect-speed="500">
                    <li class="header-item"><a class="header-link" href="https://github.com/sarthou/ontologenius/wiki" tabindex="0">Wiki</a></li>
                    <li class="header-item"><a class="header-link" href="https://github.com/sarthou/ontologenius" tabindex="0"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/91/Octicons-mark-github.svg/1200px-Octicons-mark-github.svg.png" alt="github" width="40px" height="40px"/></a></li>
                </ul>
            </div>
            <a class="navbar-icon" href="../index.html">
              <img src="../images/ontologenius.png " alt="ontologenius" width="65px" height="65px"/>
            </a>
        </div>
      </div>
    </header>
  </div>

  <div class="main">

    <div class="navigationbar">
      <ul class="sub-navigation">
        <li><a href="https://github.com/sarthou/ontologenius/tree/master/src/utility">C++ API sources</a></li>
        <li><a href="https://github.com/sarthou/ontologenius/tree/master/include/ontoloGenius/utility">C++ API headers</a></li>
        <li><a href="https://gitlab.com/sarthou/ontologenius/pipelines">Pipelines</a></li>
      </ul>
      <h1>Ontologenius Documentation</h1>
    </div>

    <div class="content">
      <div class="sidebar" style="transition: all 0.2s ease-out 0s; top: -588px;">
        <div class="contents">
          <div id="contents-toggle" class=""></div>
          <h3>Contents</h3>
          <ul style="display: block;">
            <li class="level1"><a href="Presentation.html">1. Presentation of the problem</a></li>
            <li class="level1"><a href="InsertNewKnowledge.html">2. Insert new knowledge</a></li>
            <li class="level1"><a href="MakeItProactive.html"><b>3. Make our agent proactive</b></a></li>
          </ul>
        </div>

        <div class="contents">
          <div id="contents-toggle" class=""></div>
          <h3>Getting Start</h3>
          <ul style="display: block;">
            <li class="level1"><a href="../Download.html">Download</a></li>
            <li class="level1"><a href="../InstallOntologenius.html">Install Ontologenius</a></li>
            <li class="level1"><a href="../SetUp.html">Set Up Your Environnement</a></li>
            <li class="level1"><a href="../Tutorials.html">Tutorials</a></li>
          </ul>
        </div>

        <div class="contents">
          <div id="contents-toggle" class=""></div>
          <h3>Overview</h3>
          <ul style="display: block;">
            <li class="level1"><a href="../overview/launchers.html">Launchers</a></li>
            <li class="level1"><a href="../overview/ontoloGUI.html">OntoloGUI</a></li>
            <!--li class="level1"><a href="plugins.html">Plugins</a></li-->
          </ul>
        </div>

        <div class="contents">
          <div id="contents-toggle" class=""></div>
          <h3><a href="CppAPI.html">All C++ Classes</a></h3>
          <ul style="display: block;">
            <li class="level1"><a href="../ActionClient.html">ActionClient</a></li>
            <li class="level1"><a href="../ClassClient.html">ClassClient</a></li>
            <li class="level1"><a href="../ClientBase.html">ClientBase</a></li>
            <li class="level1"><a href="../DataPropertyClient.html">DataPropertyClient</a></li>
            <li class="level1"><a href="../FeederPublisher.html">FeederPublisher</a></li>
            <li class="level1"><a href="../IndividualClient.html">IndividualClient</a></li>
            <li class="level1"><a href="../ManagerClient.html">ManagerClient</a></li>
            <li class="level1"><a href="../ObjectPropertyClient.html">ObjectPropertyClient</a></li>
            <li class="level1"><a href="../OntologiesManipulator.html">OntologiesManipulator</a></li>
            <li class="level1"><a href="../OntologyClient.html">OntologyClient</a></li>
            <li class="level1"><a href="../OntologyManipulator.html">OntologyManipulator</a></li>
            <li class="level1"><a href="../ReasonerClient.html">ReasonerClient</a></li>
          </ul>
        </div>

        <div class="contents">
          <div id="contents-toggle" class=""></div>
          <h3>See also</h3>
          <ul style="display: block;">
            <li class="level1"><a href="https://sarthou.github.io/ontologenius_query/" target="_blank">Ontologenius_query</a></li>
          </ul>
        </div>
      </div>

      <div class="context">
        <div class="toturial-header">
          <h1 class="title">Feed and generalize</h1>
          <a class="toturial-subheader">
            <div class="toturial-subheader__main-icon">
              <i class="fas fa-brain"></i>
            </div>
            <div class="toturial-subheader__title">
              <h2 class="title">Do the birds fly ?</h2>
            </div>
          </a>
        </div>

        <h1 class="title">Make our agent proactive</h1>

        <p>In the previous part, our program has realized its generalizations without telling us and the
          only way for us to realize this was to ask the right questions at the right time.</p>

        <p>So we will use the topic 'ontologenius/reasoner_notifications' which is a topic ontologenius
          publishes when he realize some reasoning including the generalization.</p>

        <p>The messages published on this topic are always in the form: &quot;[NEW]concept>property:type:value
          &quot;. So we will use a regex to extract the information easily as below:</p>

        <div class="code_block cpp_code" style="counter-reset:code_line 0;">
          <div class="code_line">std::<span class="cpp_type">regex</span> proactive(<span class="cpp_string">&quot;\\[NEW\\](\\w+)>can_(\\w+):bool:(\\w+)&quot;</span>);</div>
        </div>

        <p>Here is the callback function:</p>

        <div class="code_block cpp_code" style="counter-reset:code_line 0;">
          <div class="code_line"><span class="cpp_type">void</span> proactiveCallback(<span class="cpp_op">const</span> std_msgs::<span class="cpp_type">String</span> ::ConstPtr<span class="cpp_op">&</span> msg)</div>
          <div class="code_line">{</div>
          <div class="code_line">  std::<span class="cpp_type">smatch</span> match;</div>
          <div class="code_line">  <span class="cpp_op">if</span>(std::regex_match(msg<span class="cpp_op">-&gt;</span>data, match, proactive))</div>
          <div class="code_line">  {</div>
          <div class="code_line">    <span class="cpp_op">if</span>(match[<span class="cpp_value">3</span>].str() <span class="cpp_op">==</span> <span class="cpp_string">&quot;true&quot;</span>)</div>
          <div class="code_line">      std::cout <span class="cpp_op">&lt;&lt;</span> <span class="cpp_string">&quot;I think that a &quot;</span> <span class="cpp_op">&lt;&lt;</span> match[<span class="cpp_value">1</span>].str() <span class="cpp_op">&lt;&lt;</span> <span class="cpp_string">&quot; can &quot;</span> <span class="cpp_op">&lt;&lt;</span> match[<span class="cpp_value">2</span>].str() <span class="cpp_op">&lt;&lt;</span> std::endl;</div>
          <div class="code_line">    <span class="cpp_op">else</span></div>
          <div class="code_line">      std::cout <span class="cpp_op">&lt;&lt;</span> <span class="cpp_string">&quot;I think that a &quot;</span> <span class="cpp_op">&lt;&lt;</span> match[<span class="cpp_value">1</span>].str() <span class="cpp_op">&lt;&lt;</span> <span class="cpp_string">&quot; can not &quot;</span> <span class="cpp_op">&lt;&lt;</span> match[<span class="cpp_value">2</span>].str() <span class="cpp_op">&lt;&lt;</span> std::endl;</div>
          <div class="code_line">  }</div>
          <div class="code_line">}</div>
        </div>

        <p>And finally, the new ros subscriber to put in the main function:</p>

        <div class="code_block cpp_code" style="counter-reset:code_line 0;">
          <div class="code_line">ros::<span class="cpp_type">Subscriber</span> proactive_sub <span class="cpp_op">=</span> n.subscribe(<span class="cpp_string">&quot;ontologenius/reasoner_notifications&quot;</span>, <span class="cpp_value">1000</span> , proactiveCallback);</div>
        </div>

        <p>You can now delete the internal file and learn again to your program that birds can fly
          (or something else).</p>

        <p><b>This tutorial is already finished. I let you imagine everything you could do with it. Do not
          hesitate to look at all the classes made available by the API to discover all the features offered
          by ontologenius.</b></p>

        <nav class="course-pagination">
          <a href="InsertNewKnowledge.html" class="course-pagination__btn">
            <i class="fas fa-angle-left"></i>
            <span>Insert new knowledge</span>
          </a>
          <span class="course-pagination__separator"></span>
          <a href="../Tutorials.html" class="course-pagination__btn">
            <span>Tutorials</span>
            <i class="fas fa-angle-right"></i>
          </a>
        </nav>

      </div>
    </div>

  </div>
</body>

<footer>
  <div align="center">
    <p>
      Brought to you by:
      <a class="laas_logo" href="https://www.laas.fr/public/">
        <img src="../images/LogoLAAS-2016_BW.png " alt="LAAS-CNRS" height="60px"/>
      </a>
    </p>
  </div>
</footer>

</html>
